"use strict";var ie=Object.create;var N=Object.defineProperty;var le=Object.getOwnPropertyDescriptor;var ce=Object.getOwnPropertyNames;var de=Object.getPrototypeOf,ge=Object.prototype.hasOwnProperty;var _=(e,o)=>()=>(o||e((o={exports:{}}).exports,o),o.exports),fe=(e,o)=>{for(var r in o)N(e,r,{get:o[r],enumerable:!0})},K=(e,o,r,n)=>{if(o&&typeof o=="object"||typeof o=="function")for(let s of ce(o))!ge.call(e,s)&&s!==r&&N(e,s,{get:()=>o[s],enumerable:!(n=le(o,s))||n.enumerable});return e};var b=(e,o,r)=>(r=e!=null?ie(de(e)):{},K(o||!e||!e.__esModule?N(r,"default",{value:e,enumerable:!0}):r,e)),ue=e=>K(N({},"__esModule",{value:!0}),e);var V=_(G=>{"use strict";Object.defineProperty(G,"__esModule",{value:!0});var z;function R(){if(z===void 0)throw new Error("No runtime abstraction layer installed");return z}(function(e){function o(r){if(r===void 0)throw new Error("No runtime abstraction layer provided");z=r}e.install=o})(R||(R={}));G.default=R});var J=_(i=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0});i.config=i.loadMessageBundle=i.localize=i.format=i.setPseudo=i.isPseudo=i.isDefined=i.BundleFormat=i.MessageFormat=void 0;var W=V(),ve;(function(e){e.file="file",e.bundle="bundle",e.both="both"})(ve=i.MessageFormat||(i.MessageFormat={}));var me;(function(e){e.standalone="standalone",e.languagePack="languagePack"})(me=i.BundleFormat||(i.BundleFormat={}));var H;(function(e){function o(r){var n=r;return n&&q(n.key)&&q(n.comment)}e.is=o})(H||(H={}));function q(e){return typeof e<"u"}i.isDefined=q;i.isPseudo=!1;function pe(e){i.isPseudo=e}i.setPseudo=pe;function Q(e,o){var r;return i.isPseudo&&(e="\uFF3B"+e.replace(/[aouei]/g,"$&$&")+"\uFF3D"),o.length===0?r=e:r=e.replace(/\{(\d+)\}/g,function(n,s){var l=s[0],a=o[l],d=n;return typeof a=="string"?d=a:(typeof a=="number"||typeof a=="boolean"||a===void 0||a===null)&&(d=String(a)),d}),r}i.format=Q;function Fe(e,o){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return Q(o,r)}i.localize=Fe;function he(e){return(0,W.default)().loadMessageBundle(e)}i.loadMessageBundle=he;function be(e){return(0,W.default)().config(e)}i.config=be});var ne=_(h=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0});h.config=h.loadMessageBundle=h.BundleFormat=h.MessageFormat=void 0;var p=require("path"),v=require("fs"),Ce=V(),f=J(),ee=J();Object.defineProperty(h,"MessageFormat",{enumerable:!0,get:function(){return ee.MessageFormat}});Object.defineProperty(h,"BundleFormat",{enumerable:!0,get:function(){return ee.BundleFormat}});var oe=Object.prototype.toString;function ye(e){return oe.call(e)==="[object Number]"}function C(e){return oe.call(e)==="[object String]"}function we(e){return e===!0||e===!1}function k(e){return JSON.parse(v.readFileSync(e,"utf8"))}var L,t;function Ie(){if(t={locale:void 0,language:void 0,languagePackSupport:!1,cacheLanguageResolution:!0,messageFormat:f.MessageFormat.bundle},C(process.env.VSCODE_NLS_CONFIG))try{var e=JSON.parse(process.env.VSCODE_NLS_CONFIG),o=void 0;if(e.availableLanguages){var r=e.availableLanguages["*"];C(r)&&(o=r)}if(C(e.locale)&&(t.locale=e.locale.toLowerCase()),o===void 0?t.language=t.locale:o!=="en"&&(t.language=o),we(e._languagePackSupport)&&(t.languagePackSupport=e._languagePackSupport),C(e._cacheRoot)&&(t.cacheRoot=e._cacheRoot),C(e._languagePackId)&&(t.languagePackId=e._languagePackId),C(e._translationsConfigFile)){t.translationsConfigFile=e._translationsConfigFile;try{t.translationsConfig=k(t.translationsConfigFile)}catch{if(e._corruptedFile){var n=p.dirname(e._corruptedFile);v.exists(n,function(l){l&&v.writeFile(e._corruptedFile,"corrupted","utf8",function(a){console.error(a)})})}}}}catch{}(0,f.setPseudo)(t.locale==="pseudo"),L=Object.create(null)}Ie();function Se(){return t.languagePackSupport===!0&&t.cacheRoot!==void 0&&t.languagePackId!==void 0&&t.translationsConfigFile!==void 0&&t.translationsConfig!==void 0}function Y(e){return function(o,r){for(var n=[],s=2;s<arguments.length;s++)n[s-2]=arguments[s];if(ye(o)){if(o>=e.length){console.error(`Broken localize call found. Index out of bounds. Stacktrace is
: `.concat(new Error("").stack));return}return(0,f.format)(e[o],n)}else{if(C(r))return console.warn("Message ".concat(r," didn't get externalized correctly.")),(0,f.format)(r,n);console.error(`Broken localize call found. Stacktrace is
: `.concat(new Error("").stack))}}}function xe(e){var o;if(t.cacheLanguageResolution&&o)o=o;else{if(f.isPseudo||!t.language)o=".nls.json";else for(var r=t.language;r;){var n=".nls."+r+".json";if(v.existsSync(e+n)){o=n;break}else{var s=r.lastIndexOf("-");s>0?r=r.substring(0,s):(o=".nls.json",r=null)}}t.cacheLanguageResolution&&(o=o)}return e+o}function Me(e){for(var o=t.language;o;){var r=p.join(e,"nls.bundle.".concat(o,".json"));if(v.existsSync(r))return r;var n=o.lastIndexOf("-");n>0?o=o.substring(0,n):o=void 0}if(o===void 0){var r=p.join(e,"nls.bundle.json");if(v.existsSync(r))return r}}function je(e){var o=k(p.join(e,"nls.metadata.json")),r=Object.create(null);for(var n in o){var s=o[n];r[n]=s.messages}return r}function ke(e,o){var r=t.translationsConfig[e.id];if(r){var n=k(r).contents,s=k(p.join(o,"nls.metadata.json")),l=Object.create(null);for(var a in s){var d=s[a],w=n["".concat(e.outDir,"/").concat(a)];if(w){for(var F=[],u=0;u<d.keys.length;u++){var T=d.keys[u],g=C(T)?T:T.key,m=w[g];m===void 0&&(m=d.messages[u]),F.push(m)}l[a]=F}else l[a]=d.messages}return l}}function Te(e){var o=new Date;v.utimes(e,o,o,function(){})}function A(e,o){return L[e]=o,o}function Pe(e,o){var r,n=p.join(t.cacheRoot,"".concat(e.id,"-").concat(e.hash,".json")),s=!1,l=!1;try{return r=JSON.parse(v.readFileSync(n,{encoding:"utf8",flag:"r"})),Te(n),r}catch(a){if(a.code==="ENOENT")l=!0;else if(a instanceof SyntaxError)console.log("Syntax error parsing message bundle: ".concat(a.message,".")),v.unlink(n,function(d){d&&console.error("Deleting corrupted bundle ".concat(n," failed."))}),s=!0;else throw a}if(r=ke(e,o),!r||s)return r;if(l)try{v.writeFileSync(n,JSON.stringify(r),{encoding:"utf8",flag:"wx"})}catch(a){if(a.code==="EEXIST")return r;throw a}return r}function Z(e){try{return je(e)}catch(o){console.log("Generating default bundle from meta data failed.",o);return}}function Be(e,o){var r;if(Se())try{r=Pe(e,o)}catch(s){console.log("Load or create bundle failed ",s)}if(!r){if(t.languagePackSupport)return Z(o);var n=Me(o);if(n)try{return k(n)}catch(s){console.log("Loading in the box message bundle failed.",s)}r=Z(o)}return r}function Ne(e){for(var o,r=p.dirname(e);o=p.join(r,"nls.metadata.header.json"),!v.existsSync(o);){var n=p.dirname(r);if(n===r){o=void 0;break}else r=n}return o}function $(e){if(!e)return f.localize;var o=p.extname(e);if(o&&(e=e.substr(0,e.length-o.length)),t.messageFormat===f.MessageFormat.both||t.messageFormat===f.MessageFormat.bundle){var r=Ne(e);if(r){var n=p.dirname(r),s=L[n];if(s===void 0)try{var l=JSON.parse(v.readFileSync(r,"utf8"));try{var a=Be(l,n);s=A(n,a?{header:l,nlsBundle:a}:null)}catch(u){console.error("Failed to load nls bundle",u),s=A(n,null)}}catch(u){console.error("Failed to read header file",u),s=A(n,null)}if(s){var d=e.substr(n.length+1).replace(/\\/g,"/"),w=s.nlsBundle[d];return w===void 0?(console.error("Messages for file ".concat(e," not found. See console for details.")),function(){return"Messages not found."}):Y(w)}}}if(t.messageFormat===f.MessageFormat.both||t.messageFormat===f.MessageFormat.file)try{var F=k(xe(e));return Array.isArray(F)?Y(F):(0,f.isDefined)(F.messages)&&(0,f.isDefined)(F.keys)?Y(F.messages):(console.error("String bundle '".concat(e,"' uses an unsupported format.")),function(){return"File bundle has unsupported format. See console for details"})}catch(u){u.code!=="ENOENT"&&console.error("Failed to load single file bundle",u)}return console.error("Failed to load message bundle for file ".concat(e)),function(){return"Failed to load message bundle. See console for details."}}h.loadMessageBundle=$;function re(e){return e&&(C(e.locale)&&(t.locale=e.locale.toLowerCase(),t.language=t.locale,L=Object.create(null)),e.messageFormat!==void 0&&(t.messageFormat=e.messageFormat),e.bundleFormat===f.BundleFormat.standalone&&t.languagePackSupport===!0&&(t.languagePackSupport=!1)),(0,f.setPseudo)(t.locale==="pseudo"),$}h.config=re;Ce.default.install(Object.freeze({loadMessageBundle:$,config:re}))});var Le={};fe(Le,{activate:()=>De,deactivate:()=>Ee});module.exports=ue(Le);var c=b(require("vscode"));var x=b(require("vscode")),P=b(require("path")),M=b(require("fs"));var j=b(require("vscode")),I=b(require("path"));var U={".ts":"typescript.svg",".js":"javascript.svg",".mjs":"javascript.svg",".cjs":"javascript.svg",".tsx":"react_ts.svg",".jsx":"react.svg",".html":"html.svg",".htm":"html.svg",".css":"css.svg",".scss":"sass.svg",".sass":"sass.svg",".less":"less.svg",".json":"json.svg",".yaml":"yaml.svg",".yml":"yaml.svg",".md":"markdown.svg",".markdown":"markdown.svg",".py":"python.svg",".java":"java.svg",".jar":"jar.svg",".c":"c.svg",".h":"h.svg",".cpp":"cpp.svg",".hpp":"hpp.svg",".cs":"csharp.svg",".go":"go.svg",".rs":"rust.svg",".swift":"swift.svg",".php":"php.svg",".rb":"ruby.svg",".dart":"dart.svg",".vue":"vue.svg",".svelte":"svelte.svg",".sh":"bashly.svg",".sql":"database.svg",".xml":"xml.svg",".svg":"svg.svg",".png":"image.svg",".jpg":"image.svg",".jpeg":"image.svg",".gif":"image.svg",".mp3":"audio.svg",".wav":"audio.svg",".mp4":"video.svg",".mov":"video.svg",".pdf":"pdf.svg",".zip":"zip.svg",".exe":"exe.svg","package.json":"npm.svg","go.mod":"go-mod.svg",gemfile:"gemfile.svg",dockerfile:"docker.svg","docker-compose.yml":"docker.svg","tsconfig.json":"tsconfig.svg","jsconfig.json":"jsconfig.svg","babel.config.js":"babel.svg","webpack.config.js":"webpack.svg","tailwind.config.js":"tailwindcss.svg","next.config.js":"next.svg",".gitignore":"git.svg",".gitattributes":"git.svg",".editorconfig":"editorconfig.svg",".eslintrc":"eslint.svg",".stylelintrc":"stylelint.svg",".prettierrc":"prettier.svg",".env":"settings.svg","readme.md":"readme.svg",license:"certificate.svg","changelog.md":"changelog.svg",browserslist:"browserlist.svg","commitlint.config.js":"commitlint.svg",jenkinsfile:"jenkins.svg","netlify.toml":"netlify.svg","vite.config.ts":"vite.svg"},X={src:"folder-src.svg",source:"folder-src.svg",app:"folder-app.svg",api:"folder-api.svg",client:"folder-client.svg",server:"folder-server.svg",config:"folder-config.svg",configs:"folder-config.svg",dist:"folder-dist.svg",build:"folder-dist.svg",out:"folder-dist.svg",test:"folder-test.svg",tests:"folder-test.svg",__tests__:"folder-test.svg",e2e:"folder-test.svg",spec:"folder-test.svg",scripts:"folder-scripts.svg",tools:"folder-tools.svg",assets:"folder-resource.svg",resources:"folder-resource.svg",images:"folder-images.svg",img:"folder-images.svg",icons:"folder-images.svg",styles:"folder-css.svg",css:"folder-css.svg",sass:"folder-sass.svg",fonts:"folder-font.svg",components:"folder-components.svg",widgets:"folder-components.svg",views:"folder-views.svg",pages:"folder-views.svg",routes:"folder-routes.svg",public:"folder-public.svg",static:"folder-public.svg",utils:"folder-utils.svg",helpers:"folder-helper.svg",lib:"folder-lib.svg",libraries:"folder-lib.svg",db:"folder-database.svg",database:"folder-database.svg",migrations:"folder-database.svg",data:"folder-database.svg",docs:"folder-docs.svg",documentation:"folder-docs.svg",i18n:"folder-i18n.svg",locale:"folder-i18n.svg",environments:"folder-environment.svg",environment:"folder-environment.svg",".vscode":"folder-vscode.svg",".github":"folder-github.svg",".git":"folder-git.svg",node_modules:"folder-node.svg",cypress:"folder-cypress.svg",next:"folder-next.svg",nuxt:"folder-nuxt.svg",vue:"folder-vue.svg",angular:"folder-angular.svg"};var S=class extends j.TreeItem{constructor(r,n,s,l,a=!0,d=!1){super(r,l);this.label=r;this.resourcePath=n;this.type=s;this.collapsibleState=l;this.exists=a;this.isRoot=d;this.tooltip=n,this.description=a?"":"(Not Found)",s==="folder"?this.iconPath=this.getFolderIcon(n):this.iconPath=this.getFileIcon(n),s==="file"?this.contextValue=d?"rootFile":"file":this.contextValue=d?"rootFolder":"folder",s==="file"&&a&&(this.command={command:"ciallo-global.openFile",title:"Open File",arguments:[n]}),a||(this.iconPath=new j.ThemeIcon(s==="folder"?"folder":"file",new j.ThemeColor("disabledForeground")))}getFolderIcon(r){let n=I.basename(r).toLowerCase(),s=X[n]||"folder.svg";return I.join(__dirname,"../icons",s)}getFileIcon(r){let n=I.extname(r).toLowerCase(),s=U[n]||"file.svg";return I.join(__dirname,"../icons",s)}};var D=class{constructor(o){this.configManager=o;o.onConfigChange(()=>{this.refresh()})}_onDidChangeTreeData=new x.EventEmitter;onDidChangeTreeData=this._onDidChangeTreeData.event;currentMode="folders";refresh(){this._onDidChangeTreeData.fire()}toggleMode(){this.currentMode=this.currentMode==="folders"?"files":"folders",console.log(`\u5207\u6362\u5230${this.currentMode==="folders"?"\u6587\u4EF6\u5939":"\u6587\u4EF6"}\u6A21\u5F0F`),this.refresh()}getCurrentMode(){return this.currentMode}getTreeItem(o){return o}async getChildren(o){return o?this.getFolderChildren(o):this.getRootItems()}getRootItems(){return this.currentMode==="folders"?this.configManager.getFolders().map(r=>{let n=M.existsSync(r);return new S(P.basename(r),r,"folder",x.TreeItemCollapsibleState.Collapsed,n,!0)}):this.configManager.getFiles().map(r=>{let n=M.existsSync(r);return new S(P.basename(r),r,"file",x.TreeItemCollapsibleState.None,n,!0)})}getFolderChildren(o){if(o.type!=="folder")return[];try{let r=M.readdirSync(o.resourcePath),n=[];for(let s of r){let l=P.join(o.resourcePath,s);M.statSync(l).isDirectory()?n.push(new S(s,l,"folder",x.TreeItemCollapsibleState.Collapsed,!0)):n.push(new S(s,l,"file",x.TreeItemCollapsibleState.None,!0,!1))}return n}catch(r){return console.error(`Read folder error: ${o.resourcePath}`,r),[]}}};var y=b(require("vscode")),E=class e{static CONFIG_KEY="cialloGlobal";getConfig(){let o=y.workspace.getConfiguration(e.CONFIG_KEY);return{folders:o.get("folders")||[],files:o.get("files")||[]}}getFolders(){return this.getConfig().folders}getFiles(){return this.getConfig().files}onConfigChange(o){return y.workspace.onDidChangeConfiguration(r=>{r.affectsConfiguration(e.CONFIG_KEY)&&o()})}async updateFolders(o){await y.workspace.getConfiguration(e.CONFIG_KEY).update("folders",o,y.ConfigurationTarget.Global)}async updateFiles(o){await y.workspace.getConfiguration(e.CONFIG_KEY).update("files",o,y.ConfigurationTarget.Global)}};var B=b(require("vscode")),se=b(ne()),O=se.loadMessageBundle();async function te(e,o){let r=e.getFolders();if(!r.includes(o)){B.window.showInformationMessage(O("removeFolder.notInConfig","This folder is not in global configuration."));return}let n=r.filter(s=>s!==o);await e.updateFolders(n),B.window.showInformationMessage(O("removeFolder.success","Removed folder from configuration: {0}",o))}async function ae(e,o){let r=e.getFiles();if(!r.includes(o)){B.window.showInformationMessage(O("removeFile.notInConfig","This file path is not in configuration."));return}let n=r.filter(s=>s!==o);await e.updateFiles(n),B.window.showInformationMessage(O("removeFile.success","Removed file from configuration: {0}",o))}function De(e){console.log('Extension "ciallo-global" is now active!');let o=new E,r=new D(o),n=c.window.createTreeView("cialloFileExplorer",{treeDataProvider:r,showCollapseAll:!0});n.title="\u{1F5C2}\uFE0F";let s=c.commands.registerCommand("ciallo-global.toggleMode",()=>{r.toggleMode(),r.getCurrentMode()==="files"?n.title="\u{1F4C4}":n.title="\u{1F5C2}\uFE0F"}),l=c.commands.registerCommand("ciallo-global.openFile",g=>{let m=c.Uri.file(g);c.window.showTextDocument(m)}),a=c.commands.registerCommand("ciallo-global.refresh",()=>{r.refresh()}),d=c.commands.registerCommand("ciallo-global.openSettings",()=>{c.commands.executeCommand("workbench.action.openSettings","cialloGlobal")}),w=c.commands.registerCommand("ciallo-global.revealInExplorer",g=>{let m=g.resourcePath||g;m&&c.commands.executeCommand("revealFileInOS",c.Uri.file(m))}),F=c.commands.registerCommand("ciallo-global.openFolder",g=>{let m=g.resourcePath||g;m&&c.commands.executeCommand("vscode.openFolder",c.Uri.file(m),{forceNewWindow:!0})}),u=c.commands.registerCommand("ciallo-global.removeCurrentFile",g=>{!g||!g.resourcePath||ae(o,g.resourcePath)}),T=c.commands.registerCommand("ciallo-global.removeCurrentFolder",g=>{!g||!g.resourcePath||te(o,g.resourcePath)});e.subscriptions.push(n,s,l,a,d,w,F,u,T)}function Ee(){}0&&(module.exports={activate,deactivate});
